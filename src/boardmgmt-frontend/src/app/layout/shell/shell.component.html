<div class="shell">
  <div class="shell__backdrop" *ngIf="sidebarOpen" (click)="toggleSidebar()"></div>

  <aside class="shell__sidebar" [class.open]="sidebarOpen">
    <div class="sidebar__brand">
      <div class="sidebar__brand-icon">
        <i class="fas fa-chess-king"></i>
      </div>
      <div>
        <h1>Board Portal</h1>
        <p>Governance Suite</p>
      </div>
    </div>

    <nav class="sidebar__nav">
      <p class="sidebar__section">Workspace</p>
      <a
        class="sidebar__link"
        routerLink="/dashboard"
        routerLinkActive="active"
        *ngIf="can(AppModule.Dashboard)"
        (click)="closeSidebar()"
      >
        <i class="fas fa-tachometer-alt"></i>
        <span>Dashboard</span>
      </a>
      <a
        class="sidebar__link"
        routerLink="/meetings"
        routerLinkActive="active"
        *ngIf="can(AppModule.Meetings)"
        (click)="closeSidebar()"
      >
        <i class="fas fa-calendar-alt"></i>
        <span>Meetings</span>
      </a>
      <a
        class="sidebar__link"
        routerLink="/documents"
        routerLinkActive="active"
        *ngIf="can(AppModule.Documents)"
        (click)="closeSidebar()"
      >
        <i class="fas fa-file-alt"></i>
        <span>Documents</span>
      </a>
      <a
        class="sidebar__link"
        routerLink="/voting"
        routerLinkActive="active"
        *ngIf="can(AppModule.Votes)"
        (click)="closeSidebar()"
      >
        <i class="fas fa-vote-yea"></i>
        <span>Voting</span>
      </a>
      <a
        class="sidebar__link"
        routerLink="/reports"
        routerLinkActive="active"
        *ngIf="can(AppModule.Reports)"
        (click)="closeSidebar()"
      >
        <i class="fas fa-chart-bar"></i>
        <span>Reports</span>
      </a>
      <a
        class="sidebar__link"
        routerLink="/messages"
        routerLinkActive="active"
        *ngIf="can(AppModule.Messages)"
        (click)="closeSidebar()"
      >
        <i class="fas fa-comments"></i>
        <span>Messages</span>
      </a>

      <p class="sidebar__section" *ngIf="can(AppModule.Users) || can(AppModule.Settings)">
        Administration
      </p>
      <a
        class="sidebar__link"
        routerLink="/users"
        routerLinkActive="active"
        *ngIf="can(AppModule.Users)"
        (click)="closeSidebar()"
      >
        <i class="fas fa-users"></i>
        <span>Users</span>
      </a>
      <a
        class="sidebar__link"
        routerLink="/settings/roles"
        routerLinkActive="active"
        *ngIf="can(AppModule.Settings)"
        (click)="closeSidebar()"
      >
        <i class="fas fa-cog"></i>
        <span>Settings</span>
      </a>
      <a
        class="sidebar__link"
        routerLink="/roles"
        routerLinkActive="active"
        *ngIf="can(AppModule.Settings)"
        (click)="closeSidebar()"
      >
        <i class="fas fa-user-shield"></i>
        <span>Roles</span>
      </a>
    </nav>

    <div class="sidebar__footer">
      <button type="button" class="sidebar__logout" (click)="onLogout($event)">
        <i class="fas fa-sign-out-alt"></i>
        <span>Logout</span>
      </button>
    </div>
  </aside>

  <div class="shell__workspace">
    <header class="workspace__topbar">
      <button class="topbar__menu" type="button" (click)="toggleSidebar()" aria-label="Toggle navigation">
        <span></span>
        <span></span>
        <span></span>
      </button>

      <div class="topbar__title">
        <h2>Boardroom Overview</h2>
        <p>Stay ahead of meetings, votes, and compliance tasks.</p>
      </div>

      <div class="topbar__actions">
        <label class="topbar__search">
          <i class="fas fa-search"></i>
          <input type="search" placeholder="Search boards, tasks, documents" />
        </label>
        <a class="topbar__action" routerLink="/meetings" (click)="closeSidebar()">
          <i class="fas fa-plus"></i>
          Schedule Meeting
        </a>
      </div>
    </header>

    <main class="workspace__content">
      <div class="workspace__surface">
        <router-outlet></router-outlet>
      </div>
    </main>
  </div>
</div>
