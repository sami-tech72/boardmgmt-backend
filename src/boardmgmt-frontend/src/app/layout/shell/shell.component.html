<div class="layout">
  <div
    class="sidebar-backdrop"
    [class.visible]="sidebarOpen"
    (click)="closeSidebar()"
    aria-hidden="true"
  ></div>

  <nav
    id="main-sidebar"
    class="sidebar"
    [class.open]="sidebarOpen"
    aria-label="Main navigation"
  >
    <div class="sidebar__body">
      <div class="sidebar__brand text-center">
        <i class="fas fa-users-cog fa-2x text-white mb-2"></i>
        <h5 class="text-white">Board Portal</h5>
      </div>

      <ul class="nav flex-column sidebar__menu">
        <li class="nav-item" *ngIf="can(AppModule.Dashboard)">
          <a
            class="nav-link"
            routerLink="/dashboard"
            routerLinkActive="active"
            (click)="closeSidebar()"
          >
            <i class="fas fa-tachometer-alt"></i> Dashboard
          </a>
        </li>

        <li class="nav-item" *ngIf="can(AppModule.Meetings)">
          <a
            class="nav-link"
            routerLink="/meetings"
            routerLinkActive="active"
            (click)="closeSidebar()"
          >
            <i class="fas fa-calendar-alt"></i> Meetings
          </a>
        </li>

        <li class="nav-item" *ngIf="can(AppModule.Documents)">
          <a
            class="nav-link"
            routerLink="/documents"
            routerLinkActive="active"
            (click)="closeSidebar()"
          >
            <i class="fas fa-file-alt"></i> Documents
          </a>
        </li>

        <li class="nav-item" *ngIf="can(AppModule.Votes)">
          <a
            class="nav-link"
            routerLink="/voting"
            routerLinkActive="active"
            (click)="closeSidebar()"
          >
            <i class="fas fa-vote-yea"></i> Voting
          </a>
        </li>

        <li class="nav-item" *ngIf="can(AppModule.Reports)">
          <a
            class="nav-link"
            routerLink="/reports"
            routerLinkActive="active"
            (click)="closeSidebar()"
          >
            <i class="fas fa-chart-bar"></i> Reports
          </a>
        </li>

        <li class="nav-item" *ngIf="can(AppModule.Messages)">
          <a
            class="nav-link"
            routerLink="/messages"
            routerLinkActive="active"
            (click)="closeSidebar()"
          >
            <i class="fas fa-comments"></i> Messages
          </a>
        </li>

        <li class="nav-item" *ngIf="can(AppModule.Users)">
          <a
            class="nav-link"
            routerLink="/users"
            routerLinkActive="active"
            (click)="closeSidebar()"
          >
            <i class="fas fa-users"></i> Users
          </a>
        </li>

        <li class="nav-item" *ngIf="can(AppModule.Settings)">
          <a
            class="nav-link"
            routerLink="/settings/roles"
            routerLinkActive="active"
            (click)="closeSidebar()"
          >
            <i class="fas fa-cog"></i> Settings
          </a>
        </li>

        <li class="nav-item" *ngIf="can(AppModule.Settings)">
          <a
            class="nav-link"
            routerLink="/roles"
            routerLinkActive="active"
            (click)="closeSidebar()"
          >
            <i class="fas fa-user-shield"></i> Role
          </a>
        </li>
      </ul>

      <hr class="sidebar__divider" />

      <ul class="nav flex-column sidebar__menu">
        <li class="nav-item">
          <a
            class="nav-link"
            href="/auth"
            (click)="closeSidebar(); onLogout($event)"
          >
            <i class="fas fa-sign-out-alt"></i> Logout
          </a>
        </li>
      </ul>
    </div>
  </nav>

  <div class="content-area">
    <header class="top-navbar">
      <button
        type="button"
        class="sidebar-toggle"
        (click)="toggleSidebar()"
        [attr.aria-expanded]="sidebarOpen"
        aria-controls="main-sidebar"
        aria-label="Toggle navigation"
      >
        <i class="fas fa-bars"></i>
      </button>

      <div class="top-navbar__brand">
        <i class="fas fa-users-cog"></i>
        <span>Board Portal</span>
      </div>
    </header>

    <main class="main-content content-wrapper">
      <router-outlet></router-outlet>
    </main>
  </div>
</div>
